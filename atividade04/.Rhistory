geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)] - 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)] - 0.003,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)] - 0.0005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)] - 0.001,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] _+ 0.001,
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.001,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.05,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.01,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão")
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
theme_classic()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent) +
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent) +
labs(colour = "Retornos")
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent) +
labs(colour = "Retornos") +
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red", label = "LAC") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent) +
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red", label = "LAC") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), show.legend = T) +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent) +
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red", show.legend = T, legend = "LAC") +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent) +
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red", show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent) +
theme_bw()
ggplot(df, aes(x = varP, y = retornoP)) +
geom_path(color = "blue", size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "red", show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, colour = "Y2")) +
geom_path(color = "blue", size = 1.01) +
geom_abline(aes(colour = "Y1"), intercept = 0.05, slope = max(df$slpRf), colour = , show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("Y1" = "darkblue", "Y2" = "red"))
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "Y1"), size = 1.01) +
geom_abline(intercept = 0.05, slope = max(df$slpRf), colour = "Y2", show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("Y1" = "darkblue", "Y2" = "red"))
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "Y1"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "Y2"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("Y1" = "darkblue", "Y2" = "red"))
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "Y1"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "Y2"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("Y1" = "darkblue", "Y2" = "red")) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("CPI" = "darkblue", "LAC" = "red")) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.005,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("CPI" = "darkblue", "LAC" = "red")) +
theme_bw()+  scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.008,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("CPI" = "darkblue", "LAC" = "red")) +
theme_bw()+
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.007,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("CPI" = "darkblue", "LAC" = "red")) +
theme_bw()+
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.0065,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("CPI" = "darkblue", "LAC" = "red")) +
theme_bw()+
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
typeof(W1MIN)
pesosMin <- c(W1MIN, 1 - W1MIN)
retornosMin <- map2_dbl(pesosMin, retornos |> select(1:2), ~ `*`)
pesosMin <- c(W1MIN, 1 - W1MIN)
retornosMin <- map2_dbl(pesosMin, retornos |> select(1:2), ~ .x * .y)
sum(retornosMin)
library(tidyverse)
library(purrr)
dados <- data.frame(
cenario = c("Recessão", "Normal", "Crescimento Rápido"),
prob = c(.25, .5, .25),
txRetornoA = c(-.08, .11, .25),
txRetornoB = c (.08, .05, -.03)
)
retornos <- dados %>%
mutate(esperadoA = prob * txRetornoA,
esperadoB = prob * txRetornoB) %>%
summarise(tresperadoA = sum(esperadoA),
tresperadoB = sum(esperadoB),
dsA = sqrt(sum( (txRetornoA - tresperadoA )^2 * prob ) ),
dsB = sqrt(sum( (txRetornoB - tresperadoB )^2 * prob ) ),
covAB = sum((txRetornoA - tresperadoA) * ( txRetornoB - tresperadoB) * prob),
corrAB = covAB / (dsA * dsB))
retornos %>%
knitr::kable(
col.names = c("A","B","A","B","Covariância ($\\sigma_{AB})$","Correlação ($\\rho_{AB}$)")
) |>
kableExtra::kable_styling(bootstrap_options = "striped", full_width = F, position = "left") |>
kableExtra::add_header_above(c("Retorno Esperado ($\\bar{R}$)" = 4, "", ""))
pesosEqual <- c(0.5, 0.5)
# mapeia os pesos para os retonos dos assets
mapRetorno <- function(pesos, retornos) {
map2_dbl(pesos, retornos,`*`)
}
#retornosEqual <- map2_dbl(pesosEqual, retornos |> select(c(1:2)), ~ .x * .y )
sum(mapRetorno(pesosEqual, retornos |> select(c(1:2))))
#sum(retornosEqual)
varPortifolio <- function(pesoj, pesok, dj, dk, cov) {
pesoj^2 * dj^2 + pesok^2 * dk^2 + 2*pesok*pesoj*cov
}
varEqual <- varPortifolio(pesosEqual[1], pesosEqual[2],
retornos$dsA,
retornos$dsB,
retornos$covAB)
varEqual
#peso que minimiza a variancia
pesoMinVar <- function(dj, dk, cov) {
(dj^2 - cov) / (dj^2 + dk^2 - 2*cov)
}
pesoMinVar(retornos$dsA, retornos$dsB, retornos$covAB)
#Vamo chamar isso de W1MIN pra evitar nomezão
W1MIN <- pesoMinVar(retornos$dsA, retornos$dsB, retornos$covAB)
pesosMin <- c(W1MIN, 1 - W1MIN)
retornosMin <- map2_dbl(pesosMin, retornos |> select(1:2), ~ .x * .y)
sum(retornosMin)
varEqual <- varPortifolio(pesosMin[1], pesosMin[2],
retornos$dsA,
retornos$dsB,
retornos$covAB)
varEqual
rbarra <- retornos |> select(1:2) |> as_vector()
df <- data.frame(
pesoj = seq(0, 1, by = .05)) |>
mutate(pesok = 1 - pesoj,
retornoP = pesoj * rbarra[1] + pesok * rbarra[2],
varP = sqrt(varPortifolio(pesoj, pesok,retornos$dsA,retornos$dsB,retornos$covAB)),
slpRf = (retornoP - 0.05) / varP
)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.0065,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("CPI" = "darkblue", "LAC" = "red")) +
theme_bw()+
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
rbarra <- retornos |> select(1:2) |> as_vector()
pesoRf <- 0.2
df <- data.frame(
pesoj = seq(0, 1, by = .05)) |>
mutate(pesok = 1 - pesoj,
retornoP = pesoj * rbarra[1] + pesok * rbarra[2],
varP = sqrt(varPortifolio(pesoj, pesok,retornos$dsA,retornos$dsB,retornos$covAB)),
slpRf = (retornoP - 0.05) / varP,
retornoC = 0.05 * pesoRf + (1 - pesoRf) * retornoP
)
df |> filter(slpRf == max(slpRf))
df |> filter(varP == min(varP))
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.0065,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Carteiras", values = c("CPI" = "darkblue", "LAC" = "red")) +
theme_bw()+
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
ggplot(df, aes(x = varP, y = retornoP, )) +
geom_path(aes(colour = "CPI"), size = 1.01) +
geom_abline(aes(intercept = 0.05, slope = max(df$slpRf), colour = "LAC"), show.legend = T) +
geom_point(aes(x=varP[slpRf == max(slpRf)], y=retornoP[slpRf == max(slpRf)]), colour = "red") +
#Maior premio de risco
annotate("text", x=df$varP[df$slpRf == max(df$slpRf)],
y=df$retornoP[df$slpRf == max(df$slpRf)] + 0.005, label = "max(S)" ) +
#Menor variancia
geom_point(aes(x=min(varP), y=retornoP[varP == min(varP)]), colour = "red") +
annotate("text", x=df$varP[df$varP == min(df$varP)] + 0.0065,
y=df$retornoP[df$varP == min(df$varP)], label = "min(sigma[P])", parse = T) +
ylab("Retorno Esperado") + xlab("Desvio Padrão") +
scale_color_manual(name = "Curvas", values = c("CPI" = "darkblue", "LAC" = "red")) +
theme_bw()+
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(labels = scales::percent)
